(()=>{"use strict";const e=window.React,t=window.wp.blocks,o=window.wp.blockEditor,r=window.wp.components,n=window.wp.i18n,l=window.wp.element;function a({attributes:t,setAttributes:a,name:c}){const i=(0,o.useBlockProps)(),[s,p]=(0,l.useState)([]),[m,u]=(0,l.useState)(""),[f,d]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{wp.apiFetch({path:`/hyperblocks/v1/block-fields?name=${c}`}).then((e=>{p(e||[])})).catch((e=>{console.error("Failed to fetch block fields:",e),p([])}))}),[c]),(0,l.useEffect)((()=>{c&&!f&&(d(!0),wp.apiFetch({path:"/hyperblocks/v1/render-preview",method:"POST",data:{blockName:c,attributes:t}}).then((e=>{e.success?u(e.html):u(`<div class="hyperblocks-error">Preview Error: ${e.error}</div>`)})).catch((e=>{console.error("Failed to fetch preview:",e),u('<div class="hyperblocks-error">Preview failed to load</div>')})).finally((()=>{d(!1)})))}),[t,c]),(0,e.createElement)("div",{...i},(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:(0,n.__)("Block Settings","hyperblocks")},s.map((o=>function(o){const n={key:o.name,label:o.label,value:t[o.name],onChange:e=>function(e,t){a({[e]:t})}(o.name,e)};switch(o.type){case"text":return(0,e.createElement)(r.TextControl,{...n,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0});case"textarea":return(0,e.createElement)(r.TextareaControl,{...n,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0});case"color":return(0,e.createElement)(r.ColorPalette,{...n,colors:[{name:"Red",color:"#f00"},{name:"Blue",color:"#00f"},{name:"Green",color:"#0f0"},{name:"Yellow",color:"#fff000"},{name:"Black",color:"#000000"},{name:"White",color:"#ffffff"}]});case"url":return(0,e.createElement)(r.TextControl,{...n,type:"url",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0});default:return(0,e.createElement)(r.TextControl,{...n,help:`Unknown field type: ${o.type}`,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}}(o))))),f&&(0,e.createElement)("div",{className:"hyperblocks-loading"},(0,e.createElement)("p",null,(0,n.__)("Loading preview...","hyperblocks"))),!f&&m&&(0,e.createElement)("div",{className:"hyperblocks-preview",dangerouslySetInnerHTML:{__html:m}}),!f&&!m&&(0,e.createElement)("div",{className:"hyperblocks-placeholder"},(0,e.createElement)("p",null,(0,n.__)("Configure your block settings to see a preview.","hyperblocks"))))}window.hyperBlocksConfig&&window.hyperBlocksConfig.forEach((function(e){(0,t.registerBlockType)(e.name,{title:e.title,icon:e.icon,category:"widgets",edit:a,save:function(){return null}})}))})();